---
title: 记一次Win10+Fedora双系统的小折腾
date: 2018-11-06 21:21:10
tags:
    - Win10
    - Linux
    - 双系统
    - 引导修复
categories:
    - 小折腾
---

### 问题描述

因课程需要，我在Win10上安装了Fedora双系统，结果出现了奇怪的问题，现Fedora系统可正常进入，Win10也有引导项，但无法进入Win10系统，报错信息见图。
我在Google上搜了类似的问题，大多是诸如以下的原因：

<!-- more -->

- 主板供电不足（我使用的是台式机应该不会有这个问题）
- BIOS中系统时间不正确（我也未曾修改过该时间）

这些原因可能会造成与我类似的状况，但很显然这些都不是此处的问题所在

### 问题出现的环境背景及自己尝试过哪些方法

#### 系统相关信息：

主系统Windows10专业版（安装在100G的SSD中），Fedora29（安装在由1T的HHD分出的50G硬盘中）

#### 尝试过得方法：

 1. 曾使用PE系统中的引导修复工具修复Win10引导，无果
 2. 在Fedora中安装了`grub工具`尝试修复Win10引导，grub是用来配置启动时引导的系统，而我这里启动后切换到grub界面是有Win10引导的，因此问题应该不是出在这儿，而是出在Win10的引导文件`\Windows\System32\winload.efi`上，感觉此方法应该是行不通的（到此处我排除了grub引导出错的可能性）
 3. 至此，我想既然问题出在引导文件上，我从我室友电脑上拷贝了一份该文件替换了我的引导文件，然后再使用PE中的引导修复工具修复了一遍，仍然无果

### 问题截图

![Win10报错](/images/bVbjaD6.jpeg)

如上所示，错误信息提示文件`\Windows\System32\winload.efi`出错，导致我一直陷入找`winload.efi`文件错误的怪圈。

### 问题解决方法

鼓捣大半天，我仍然无法解决此问题，便在[SegmentFault](https://segmentfault.com/q/1010000016923264)上提问，希望藉此找到解答。在此要非常感谢解决了我的问题的答主[冯恒智](https://segmentfault.com/u/fenghengzhi/)，一言点睛。

#### 具体解决方法如下（划重点）：

在PE中使用bootice的bcd编辑功能，打开了Win10所在磁盘中的BCD文件（C:\EFI\Microsoft\Boot\BCD），发现其中的**【启动设备】**项下的**启动磁盘**和**启动分区**项被置空了，我将其填写完毕后（如下图所示）发现Win10就可以正常启动了，我想这应该是我在安装Fedora时的一些不当操作使得BCD文件被修改的缘故而让Win10无法正常启动（Bootice使用方法可参见[此博客](https://blog.csdn.net/testcs_dn/article/details/47904937)）。

![bootice选项](/images/image-20181106214511931.png)

#### 疑问：

我在安装Fedora时应该说，和Win10所在盘是完全分隔开来的，为何Fedora安装好后会影响到Win10的Boot文件呢？更疑惑的是它只影响了配置中的**启动磁盘**和**启动分区**两项，而其他都未曾影响？待解……

#### 就很玄学（挠头

#### 11月7日更新

SegmentFault上的答主[冯恒智](https://segmentfault.com/u/fenghengzhi/)又回复了我的问题，如下：
> 并不是因为你编辑过bcd文件而导致启动磁盘和启动分区项被置空了，而是在win10安完后编辑过磁盘（比如分区啊，改盘符啊，调整容量什么的）导致找不到启动磁盘和启动分区，重新指定一下就行了
